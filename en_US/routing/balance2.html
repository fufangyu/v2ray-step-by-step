<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Load Balancing - Continued | V2Ray Beginner&#39;s Guide</title>
    <meta name="description" content="Step-by-step guide for first-timers&#39; using V2Ray.">
    
    
    <link rel="preload" href="/assets/css/0.styles.76ede355.css" as="style"><link rel="preload" href="/assets/js/app.4f1fc63e.js" as="script"><link rel="preload" href="/assets/js/2.08967936.js" as="script"><link rel="preload" href="/assets/js/76.b3765c2e.js" as="script"><link rel="prefetch" href="/assets/js/10.74d5a15f.js"><link rel="prefetch" href="/assets/js/11.60cf8d49.js"><link rel="prefetch" href="/assets/js/12.eceffb8c.js"><link rel="prefetch" href="/assets/js/13.c0e7fd70.js"><link rel="prefetch" href="/assets/js/14.68a88514.js"><link rel="prefetch" href="/assets/js/15.7d8ea834.js"><link rel="prefetch" href="/assets/js/16.8cba57ce.js"><link rel="prefetch" href="/assets/js/17.7c019f40.js"><link rel="prefetch" href="/assets/js/18.e84ae817.js"><link rel="prefetch" href="/assets/js/19.4e525ccd.js"><link rel="prefetch" href="/assets/js/20.5b08a6a2.js"><link rel="prefetch" href="/assets/js/21.1d92b589.js"><link rel="prefetch" href="/assets/js/22.432b1b43.js"><link rel="prefetch" href="/assets/js/23.14e5015a.js"><link rel="prefetch" href="/assets/js/24.4c4c722b.js"><link rel="prefetch" href="/assets/js/25.7d09b44b.js"><link rel="prefetch" href="/assets/js/26.f11a3c0a.js"><link rel="prefetch" href="/assets/js/27.b41bab9e.js"><link rel="prefetch" href="/assets/js/28.fae2a600.js"><link rel="prefetch" href="/assets/js/29.68449d79.js"><link rel="prefetch" href="/assets/js/3.8df44d39.js"><link rel="prefetch" href="/assets/js/30.040e92a7.js"><link rel="prefetch" href="/assets/js/31.7cde63ee.js"><link rel="prefetch" href="/assets/js/32.1f767a8d.js"><link rel="prefetch" href="/assets/js/33.5af050e7.js"><link rel="prefetch" href="/assets/js/34.d12c0198.js"><link rel="prefetch" href="/assets/js/35.6376092f.js"><link rel="prefetch" href="/assets/js/36.36ff702c.js"><link rel="prefetch" href="/assets/js/37.3c85e62d.js"><link rel="prefetch" href="/assets/js/38.f949515b.js"><link rel="prefetch" href="/assets/js/39.6ab41b33.js"><link rel="prefetch" href="/assets/js/4.3428b245.js"><link rel="prefetch" href="/assets/js/40.e34f957d.js"><link rel="prefetch" href="/assets/js/41.320f8084.js"><link rel="prefetch" href="/assets/js/42.2890561b.js"><link rel="prefetch" href="/assets/js/43.16cada7c.js"><link rel="prefetch" href="/assets/js/44.155331ef.js"><link rel="prefetch" href="/assets/js/45.c73e834c.js"><link rel="prefetch" href="/assets/js/46.707d005e.js"><link rel="prefetch" href="/assets/js/47.e99a7337.js"><link rel="prefetch" href="/assets/js/48.9b139e3d.js"><link rel="prefetch" href="/assets/js/49.b86c2e7a.js"><link rel="prefetch" href="/assets/js/5.f1ba1da9.js"><link rel="prefetch" href="/assets/js/50.998482a6.js"><link rel="prefetch" href="/assets/js/51.a5800a12.js"><link rel="prefetch" href="/assets/js/52.8cec7878.js"><link rel="prefetch" href="/assets/js/53.58afc8b1.js"><link rel="prefetch" href="/assets/js/54.3c92f583.js"><link rel="prefetch" href="/assets/js/55.ce9145e5.js"><link rel="prefetch" href="/assets/js/56.ace49b91.js"><link rel="prefetch" href="/assets/js/57.a90b450c.js"><link rel="prefetch" href="/assets/js/58.f8e44544.js"><link rel="prefetch" href="/assets/js/59.ab2b886f.js"><link rel="prefetch" href="/assets/js/6.807f991f.js"><link rel="prefetch" href="/assets/js/60.07957f5d.js"><link rel="prefetch" href="/assets/js/61.0effab31.js"><link rel="prefetch" href="/assets/js/62.16135e8a.js"><link rel="prefetch" href="/assets/js/63.67c855b4.js"><link rel="prefetch" href="/assets/js/64.41190cc5.js"><link rel="prefetch" href="/assets/js/65.25d06824.js"><link rel="prefetch" href="/assets/js/66.28acd4ec.js"><link rel="prefetch" href="/assets/js/67.4d2160f4.js"><link rel="prefetch" href="/assets/js/68.c0f4f56a.js"><link rel="prefetch" href="/assets/js/69.d6a090eb.js"><link rel="prefetch" href="/assets/js/7.99969174.js"><link rel="prefetch" href="/assets/js/70.7acb398a.js"><link rel="prefetch" href="/assets/js/71.254805df.js"><link rel="prefetch" href="/assets/js/72.7be060b1.js"><link rel="prefetch" href="/assets/js/73.b19fa253.js"><link rel="prefetch" href="/assets/js/74.359cd0c1.js"><link rel="prefetch" href="/assets/js/75.f05a307f.js"><link rel="prefetch" href="/assets/js/77.5d3dd8fe.js"><link rel="prefetch" href="/assets/js/78.02f5aac8.js"><link rel="prefetch" href="/assets/js/79.f67b593d.js"><link rel="prefetch" href="/assets/js/8.1b6122d7.js"><link rel="prefetch" href="/assets/js/80.63e9366d.js"><link rel="prefetch" href="/assets/js/81.da6cf019.js"><link rel="prefetch" href="/assets/js/82.d80d0268.js"><link rel="prefetch" href="/assets/js/83.2eb2bd74.js"><link rel="prefetch" href="/assets/js/84.223d8248.js"><link rel="prefetch" href="/assets/js/85.e5389b38.js"><link rel="prefetch" href="/assets/js/86.ebd6218b.js"><link rel="prefetch" href="/assets/js/87.5b4fc51c.js"><link rel="prefetch" href="/assets/js/9.9c6be865.js">
    <link rel="stylesheet" href="/assets/css/0.styles.76ede355.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en_US/" class="home-link router-link-active"><!----> <span class="site-name">V2Ray Beginner's Guide</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://v2fly.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Official Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/routing/balance2.html" class="nav-link">zh-CN</a></li><li class="dropdown-item"><!----> <a href="/en_US/routing/balance2.html" class="nav-link router-link-exact-active router-link-active">en-US</a></li><li class="dropdown-item"><!----> <a href="/fa/" class="nav-link">fa-IR</a></li><li class="dropdown-item"><!----> <a href="/ko_KR/" class="nav-link">ko-KR</a></li><li class="dropdown-item"><!----> <a href="/ru_RU/" class="nav-link">ru-RU</a></li><li class="dropdown-item"><!----> <a href="/vi_VN/" class="nav-link">vi-VN</a></li><li class="dropdown-item"><!----> <a href="/fr_FR/" class="nav-link">fr-FR</a></li></ul></div></div> <a href="https://github.com/v2fly/v2ray-step-by-step" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="https://v2fly.org" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Official Guide
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/routing/balance2.html" class="nav-link">zh-CN</a></li><li class="dropdown-item"><!----> <a href="/en_US/routing/balance2.html" class="nav-link router-link-exact-active router-link-active">en-US</a></li><li class="dropdown-item"><!----> <a href="/fa/" class="nav-link">fa-IR</a></li><li class="dropdown-item"><!----> <a href="/ko_KR/" class="nav-link">ko-KR</a></li><li class="dropdown-item"><!----> <a href="/ru_RU/" class="nav-link">ru-RU</a></li><li class="dropdown-item"><!----> <a href="/vi_VN/" class="nav-link">vi-VN</a></li><li class="dropdown-item"><!----> <a href="/fr_FR/" class="nav-link">fr-FR</a></li></ul></div></div> <a href="https://github.com/v2fly/v2ray-step-by-step" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Preface</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/en_US/" class="sidebar-link">Guide to V2Ray configuration</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/en_US/prep/prep" class="sidebar-heading clickable"><span>Before start</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/en_US/basics/basics" class="sidebar-heading clickable"><span>Basics</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/en_US/advanced/advanced" class="sidebar-heading clickable"><span>Advanced</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/en_US/app/app" class="sidebar-heading clickable"><span>Practical</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/en_US/routing/routing" class="sidebar-heading clickable open"><span>Routing</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/en_US/routing/sitedata.html" class="sidebar-link">域名文件</a></li><li><a href="/en_US/routing/bittorrent.html" class="sidebar-link">Restricting BitTorrent</a></li><li><a href="/en_US/routing/balance2.html" class="active sidebar-link">Load Balancing - Continued</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en_US/routing/balance2.html#configuration-example" class="sidebar-link">Configuration Example</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="load-balancing-continued"><a href="#load-balancing-continued" aria-hidden="true" class="header-anchor">#</a> Load Balancing - Continued</h1> <p>As mentioned in the previous chapter, we can load balancing with a V2Ray feature. However, since that kind of load balancing is implemented by improper configure V2Ray, it may not perform that well. Also there's some people think that this polling mechanism is not load balancing at all. However, after a long wait, V2Ray can finally load balance. Note that you need your have version higher than 4.3 in order to use load balancing feature.</p> <h2 id="configuration-example"><a href="#configuration-example" aria-hidden="true" class="header-anchor">#</a> Configuration Example</h2> <p>The load balancing configuration is located in the routing section and only need to be configure on the client side. In routing, configure a array of balancers that represents the rules for load balancing, each object contains a load-balanced unique label, an equalization strategy (the current strategy seems to have only a random selection), and an optional outbound proxy. Then configure specific traffic for load balancing as needed in the routing rules. In this example, the last routing rule is load balancing. According to the example, it can be known that the destination address is private IP or mainland China traffic direct connection, and all other traffic is load balancing b1 (that is, choose between jp1 and jp2). Load balancing to b2 is not used in this example.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>

  <span class="token property">&quot;inbounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    ...
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;outbounds&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;us1&quot;</span><span class="token punctuation">,</span>
      ...
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jp1&quot;</span><span class="token punctuation">,</span>
      ...
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;jp2&quot;</span><span class="token punctuation">,</span>
      ...
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;hk1&quot;</span><span class="token punctuation">,</span>
      ...
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;direct&quot;</span><span class="token punctuation">,</span>
      ...
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;routing&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;domainStrategy&quot;</span><span class="token operator">:</span> <span class="token string">&quot;IPIfNonMatch&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;balancers&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;b1&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;selector&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;jp1&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;jp2&quot;</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;tag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;b2&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;selector&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;us1&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;hk1&quot;</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;rules&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;field&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;outboundTag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;direct&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;ip&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;geoip:private&quot;</span><span class="token punctuation">,</span>
          <span class="token string">&quot;geoip:cn&quot;</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;field&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;outboundTag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;direct&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;domain&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
          <span class="token string">&quot;geosite:cn&quot;</span>
        <span class="token punctuation">]</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;field&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;network&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tcp,udp&quot;</span><span class="token punctuation">,</span>
        <span class="token property">&quot;balancerTag&quot;</span><span class="token operator">:</span> <span class="token string">&quot;b1&quot;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>From the configuration, it's easy to found V2Ray's load balancing also has the advantage of high flexibility. It can load balance the specified traffic, or configure multiple load balancing as needed. The outbound protocols of different underlying transmission configurations can also be load balanced. It can be said that the flexible routing of V2Ray is so flexible as its load balancing.</p> <p>Maybe due to balancer is newly implemented, currentlly the only strategy choosing route is random. As time progresses, there may be more strategies available.</p> <h4 id="updates"><a href="#updates" aria-hidden="true" class="header-anchor">#</a> Updates</h4> <ul><li>2018-11-09 Initial Version.</li></ul></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">8/10/2019, 7:49:49 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/en_US/routing/bittorrent.html" class="prev">
          Restricting BitTorrent
        </a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4f1fc63e.js" defer></script><script src="/assets/js/2.08967936.js" defer></script><script src="/assets/js/76.b3765c2e.js" defer></script>
  </body>
</html>
